#!/bin/bash

echo "üéØ CONFIGURA√á√ÉO WHATSAPP + INSTAGRAM INBOX"
echo "==========================================="
echo ""

# Cores
GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
RED='\033[0;31m'
NC='\033[0m'

echo -e "${GREEN}‚úÖ PRODUTOS NECESS√ÅRIOS:${NC}"
echo ""
echo -e "${BLUE}MANTER:${NC}"
echo "‚úÖ Login do Facebook para Empresas (essencial)"
echo "‚úÖ WhatsApp (principal canal)"
echo "‚úÖ Instagram (inbox para atendimento)"
echo ""
echo -e "${RED}REMOVER:${NC}"
echo "‚ùå Messenger (n√£o necess√°rio)"
echo ""

echo -e "${GREEN}üîß OTIMIZA√á√ÉO NO META FOR DEVELOPERS:${NC}"
echo ""
echo -e "${YELLOW}PASSO 1: Remover Messenger${NC}"
echo "1. Acesse: https://developers.facebook.com/"
echo "2. V√° em: Products ‚Üí Messenger"
echo "3. Clique: Remove Product"
echo "4. Confirme a remo√ß√£o"
echo ""

echo -e "${YELLOW}PASSO 2: Verificar WhatsApp${NC}"
echo "1. V√° em: Products ‚Üí WhatsApp"
echo "2. Verifique se est√° ativo"
echo "3. Configure as permiss√µes necess√°rias"
echo ""

echo -e "${YELLOW}PASSO 3: Verificar Instagram${NC}"
echo "1. V√° em: Products ‚Üí Instagram Basic Display"
echo "2. Verifique se est√° ativo"
echo "3. Configure as permiss√µes necess√°rias"
echo ""

echo -e "${GREEN}üéØ PERMISS√ïES NECESS√ÅRIAS:${NC}"
echo ""
echo -e "${BLUE}WhatsApp Business API:${NC}"
echo "‚Ä¢ whatsapp_business_management"
echo "‚Ä¢ whatsapp_business_messaging"
echo "‚Ä¢ pages_show_list"
echo "‚Ä¢ pages_messaging"
echo ""

echo -e "${BLUE}Instagram Basic Display:${NC}"
echo "‚Ä¢ instagram_basic"
echo "‚Ä¢ instagram_manage_messages"
echo "‚Ä¢ pages_show_list"
echo "‚Ä¢ pages_messaging"
echo ""

echo -e "${BLUE}Facebook Login:${NC}"
echo "‚Ä¢ email"
echo "‚Ä¢ public_profile"
echo "‚Ä¢ pages_show_list"
echo ""

echo -e "${GREEN}üì± CONFIGURA√á√ÉO DOS CANAIS:${NC}"
echo ""

echo -e "${BLUE}1. üü¢ WHATSAPP BUSINESS${NC}"
echo ""
echo "Credenciais Necess√°rias:"
echo "‚Ä¢ Phone Number ID: 123456789012345"
echo "‚Ä¢ Business Account ID: 987654321098765"
echo "‚Ä¢ Access Token: EAAG..."
echo "‚Ä¢ Verify Token: meu_token_seguro_123"
echo ""
echo "Webhook URL:"
echo "https://bjsuujkbrhjhuyzydxbr.supabase.co/functions/v1/whatsapp-webhook"
echo ""

echo -e "${BLUE}2. üü¢ INSTAGRAM INBOX${NC}"
echo ""
echo "Credenciais Necess√°rias:"
echo "‚Ä¢ Access Token: INSTAGRAM_ACCESS_TOKEN"
echo "‚Ä¢ Page ID: INSTAGRAM_PAGE_ID"
echo ""
echo "Webhook URL:"
echo "https://bjsuujkbrhjhuyzydxbr.supabase.co/functions/v1/instagram-webhook"
echo ""

echo -e "${GREEN}üîó INTEGRA√á√ÉO NO SISTEMA:${NC}"
echo ""

echo -e "${YELLOW}WhatsApp Setup:${NC}"
echo "1. Abra Connect IA"
echo "2. V√° em: Integra√ß√µes ‚Üí WhatsApp"
echo "3. Clique: 'Conectar Canal WhatsApp'"
echo "4. Preencha o formul√°rio:"
echo "   Nome do Canal: WhatsApp Vendas"
echo "   Phone Number ID: 123456789012345"
echo "   Business Account ID: 987654321098765"
echo "   Access Token: EAAG..."
echo "   Verify Token: meu_token_seguro_123"
echo ""

echo -e "${YELLOW}Instagram Setup:${NC}"
echo "1. V√° em: Integra√ß√µes ‚Üí Instagram"
echo "2. Clique: 'Conectar Canal Instagram'"
echo "3. Preencha o formul√°rio:"
echo "   Nome do Canal: Instagram Inbox"
echo "   Access Token: [Instagram Access Token]"
echo "   Page ID: [Instagram Page ID]"
echo ""

echo -e "${GREEN}üìä FUNCIONALIDADES DISPON√çVEIS:${NC}"
echo ""

echo -e "${BLUE}WhatsApp Business:${NC}"
echo "‚úÖ Envio de mensagens de texto"
echo "‚úÖ Envio de imagens e documentos"
echo "‚úÖ Mensagens template (aprovadas pelo Meta)"
echo "‚úÖ Webhook para receber mensagens"
echo "‚úÖ Respostas autom√°ticas via IA"
echo "‚úÖ Campanhas de marketing"
echo ""

echo -e "${BLUE}Instagram Inbox:${NC}"
echo "‚úÖ Envio de mensagens diretas"
echo "‚úÖ Envio de m√≠dia (imagens, v√≠deos)"
echo "‚úÖ Webhook para receber mensagens"
echo "‚úÖ Respostas autom√°ticas via IA"
echo "‚úÖ Gest√£o de conversas"
echo "‚úÖ Integra√ß√£o com CRM"
echo ""

echo -e "${GREEN}üéØ FLUXO DE ATENDIMENTO:${NC}"
echo ""
echo -e "${YELLOW}Cen√°rio 1: Cliente envia mensagem no WhatsApp${NC}"
echo "1. Webhook recebe a mensagem"
echo "2. Sistema identifica o contato"
echo "3. IA gera resposta autom√°tica"
echo "4. Atendente pode intervir se necess√°rio"
echo "5. Conversa fica salva no CRM"
echo ""

echo -e "${YELLOW}Cen√°rio 2: Cliente envia mensagem no Instagram${NC}"
echo "1. Webhook recebe a mensagem"
echo "2. Sistema identifica o contato"
echo "3. IA gera resposta autom√°tica"
echo "4. Atendente pode intervir se necess√°rio"
echo "5. Conversa fica salva no CRM"
echo ""

echo -e "${GREEN}üìã CHECKLIST DE CONFIGURA√á√ÉO:${NC}"
echo ""
echo -e "${BLUE}Meta for Developers:${NC}"
echo "[ ] Remover produto Messenger"
echo "[ ] Verificar WhatsApp ativo"
echo "[ ] Verificar Instagram Basic Display ativo"
echo "[ ] Configurar webhook do WhatsApp"
echo "[ ] Configurar webhook do Instagram"
echo "[ ] Verificar permiss√µes necess√°rias"
echo ""

echo -e "${BLUE}Sistema Connect IA:${NC}"
echo "[ ] Conectar canal WhatsApp"
echo "[ ] Conectar canal Instagram"
echo "[ ] Testar envio de mensagens"
echo "[ ] Verificar recebimento de mensagens"
echo "[ ] Configurar respostas autom√°ticas"
echo "[ ] Testar integra√ß√£o com CRM"
echo ""

echo -e "${GREEN}üß™ TESTES DE FUNCIONALIDADE:${NC}"
echo ""
echo -e "${YELLOW}Teste WhatsApp:${NC}"
echo "curl -X POST https://bjsuujkbrhjhuyzydxbr.supabase.co/functions/v1/whatsapp-send-message \\"
echo "  -H \"Authorization: Bearer YOUR_SUPABASE_ANON_KEY\" \\"
echo "  -H \"Content-Type: application/json\" \\"
echo "  -d '{\"to\": \"5511999999999\", \"message\": \"Teste WhatsApp\", \"channelId\": \"your_channel_id\"}'"
echo ""

echo -e "${YELLOW}Teste Instagram:${NC}"
echo "curl -X POST https://bjsuujkbrhjhuyzydxbr.supabase.co/functions/v1/instagram-send-message \\"
echo "  -H \"Authorization: Bearer YOUR_SUPABASE_ANON_KEY\" \\"
echo "  -H \"Content-Type: application/json\" \\"
echo "  -d '{\"to\": \"instagram_user_id\", \"message\": \"Teste Instagram\", \"channelId\": \"your_channel_id\"}'"
echo ""

echo -e "${GREEN}‚ö†Ô∏è PROBLEMAS COMUNS E SOLU√á√ïES:${NC}"
echo ""
echo -e "${RED}WhatsApp:${NC}"
echo "‚Ä¢ Erro: Invalid access token"
echo "  Solu√ß√£o: Verificar se o token est√° correto e n√£o expirou"
echo ""
echo "‚Ä¢ Erro: Phone number not found"
echo "  Solu√ß√£o: Verificar o Phone Number ID no Meta"
echo ""

echo -e "${RED}Instagram:${NC}"
echo "‚Ä¢ Erro: Instagram access token invalid"
echo "  Solu√ß√£o: Verificar se o token do Instagram est√° correto"
echo ""
echo "‚Ä¢ Erro: Page not found"
echo "  Solu√ß√£o: Verificar se a p√°gina do Instagram est√° conectada"
echo ""

echo -e "${GREEN}üìà BENEF√çCIOS DA CONFIGURA√á√ÉO:${NC}"
echo ""
echo -e "${BLUE}WhatsApp + Instagram:${NC}"
echo "üéØ Cobertura completa dos principais canais"
echo "üì± Atendimento unificado em uma plataforma"
echo "ü§ñ IA automatizada para ambos os canais"
echo "üìä CRM integrado para todos os contatos"
echo "üöÄ Escalabilidade para crescimento"
echo ""

echo -e "${BLUE}Otimiza√ß√£o:${NC}"
echo "‚úÖ Menos produtos = aprova√ß√£o mais r√°pida"
echo "‚úÖ Foco nos canais que realmente usa"
echo "‚úÖ Manuten√ß√£o simplificada"
echo "‚úÖ Menos complexidade t√©cnica"
echo ""

echo -e "${GREEN}üéØ PR√ìXIMOS PASSOS:${NC}"
echo ""
echo -e "${YELLOW}1. Otimizar no Meta:${NC}"
echo "‚Ä¢ Remover Messenger"
echo "‚Ä¢ Verificar WhatsApp e Instagram ativos"
echo "‚Ä¢ Configurar webhooks"
echo ""

echo -e "${YELLOW}2. Configurar no Sistema:${NC}"
echo "‚Ä¢ Conectar canal WhatsApp"
echo "‚Ä¢ Conectar canal Instagram"
echo "‚Ä¢ Testar funcionalidades"
echo ""

echo -e "${YELLOW}3. Configurar IA:${NC}"
echo "‚Ä¢ Criar agentes de IA"
echo "‚Ä¢ Configurar respostas autom√°ticas"
echo "‚Ä¢ Treinar para ambos os canais"
echo ""

echo -e "${GREEN}üéâ CONFIGURA√á√ÉO OTIMIZADA!${NC}"
echo ""
echo "Agora voc√™ tem os dois principais canais de atendimento"
echo "configurados de forma eficiente e com menos complexidade"
echo "para aprova√ß√£o no Meta."
